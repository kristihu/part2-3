{"version":3,"sources":["components/FilterForm.js","components/PersonForm.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["FilterForm","_ref","search","handleSearch","react_default","a","createElement","value","onChange","PersonForm","addName","handleAdd","handleNumber","newName","newNumber","onSubmit","type","Persons","filtered","handleDelete","map","person","key","name","number","onClick","id","url","services_persons","newObject","axios","post","delete","concat","put","Notification","message","deleted","className","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setSearch","_useState9","_useState10","setMessage","_useState11","_useState12","setDeleted","_useState13","_useState14","toggle","prevState","useEffect","get","then","response","console","log","data","filter","toLowerCase","includes","components_FilterForm","e","target","components_PersonForm","preventDefault","personObject","find","p","test","window","confirm","personService","catch","error","setTimeout","toConsumableArray","App_Notification","components_Persons","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.73f43e0d.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nfunction FilterForm({ search, handleSearch }) {\r\n  return (\r\n    <div>\r\n      <p>\r\n        filter shown with <input value={search} onChange={handleSearch}></input>\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FilterForm;\r\n","import React from \"react\";\r\n\r\nfunction PersonForm({ addName, handleAdd, handleNumber, newName, newNumber }) {\r\n  return (\r\n    <div>\r\n      {\" \"}\r\n      <form onSubmit={addName}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleAdd} />\r\n          number: <input value={newNumber} onChange={handleNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nfunction Persons({ filtered, handleDelete }) {\r\n  return (\r\n    <div>\r\n      {filtered.map((person) => {\r\n        return (\r\n          <p key={person.name}>\r\n            {person.name} - {person.number}\r\n            <button onClick={() => handleDelete(person.id, person.name)}>\r\n              delete\r\n            </button>\r\n          </p>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\n\r\nconst url = \"/api/persons\";\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(url, newObject);\r\n};\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${url}/${id}`);\r\n};\r\n\r\nconst edit = (id, newObject) => {\r\n  return axios.put(`${url}/${id}`, newObject);\r\n};\r\nexport default {\r\n  create,\r\n  remove,\r\n  edit,\r\n};\r\n","import React, { useState, useEffect } from \"react\";\nimport FilterForm from \"./components/FilterForm\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport axios from \"axios\";\nimport personService from \"./services/persons\";\nimport \"./app.css\";\n\nconst Notification = ({ message, deleted }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return (\n    message && <div className={deleted ? \"deleted\" : \"success\"}>{message}</div>\n  );\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [deleted, setDeleted] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const toggle = () => {\n    setDeleted((prevState) => !prevState);\n  };\n\n  useEffect(() => {\n    axios.get(\"http://localhost:3001/api/persons\").then((response) => {\n      console.log(\"promise fulfilled\", response.data);\n      setPersons(response.data);\n    });\n  }, []);\n\n  const handleAdd = (e) => {\n    console.log(e.target.value);\n    setNewName(e.target.value);\n  };\n\n  const handleNumber = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const addName = (e) => {\n    e.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    console.log(newName, \"haloo\");\n    const checkDuplicates = persons.find(\n      (p) => p.name.toLowerCase() === newName.toLowerCase()\n    );\n    if (!checkDuplicates) {\n      setPersons((person) => {\n        return [...person, { name: newName, number: newNumber }];\n      });\n      personService.create(personObject).then((response) => {\n        console.log(response, \"RESP\");\n      });\n      setMessage(`${newName} has been added to the phonebook`);\n      setTimeout(() => {\n        setMessage(\"\");\n      }, 5000);\n      setNewName(\"\");\n      setNewNumber(\"\");\n    } else {\n      const test = persons.filter((person) => person.name === newName);\n      console.log(test, \"testtt\");\n      if (\n        window.confirm(\n          `${newName} is allready on the list, do you want to update the number?`\n        )\n      ) {\n        personService\n          .edit(test[0].id, { name: newName, number: newNumber })\n          .then((response) => {\n            setPersons(\n              persons.map((person) =>\n                person.name !== newName ? person : response.data\n              )\n            );\n          })\n          .catch((error) => {\n            toggle();\n            setTimeout(() => {\n              toggle();\n            }, 5000);\n            setMessage(`${newName} has allready been deleted`);\n          });\n\n        setMessage(`${newName}'s phonenumber has been updated`);\n\n        setTimeout(() => {\n          setMessage(\"\");\n        }, 5000);\n      }\n    }\n  };\n\n  const handleSearch = (e) => {\n    setSearch(e.target.value);\n  };\n\n  const handleDelete = (id, name) => {\n    console.log(\"deletedxd\", id);\n    if (window.confirm(\"Do you really want to delete??\")) {\n      personService\n        .remove(id)\n        .then((response) => {\n          setPersons(persons.filter((person) => person.id !== id));\n          toggle();\n          setMessage(`${name} has been deleted`);\n          setTimeout(() => {\n            setMessage(\"\");\n            toggle();\n          }, 5000);\n        })\n        .catch((error) => {\n          toggle();\n          setTimeout(() => {}, 5000);\n          setMessage(`${name} has allready been deleted`);\n        });\n    }\n  };\n\n  const filtered = !search\n    ? persons\n    : persons.filter((person) =>\n        person.name.toLowerCase().includes(search.toLowerCase())\n      );\n  console.log(filtered, \"filt\");\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <FilterForm search={search} handleSearch={handleSearch} />\n      <PersonForm\n        addName={addName}\n        handleAdd={handleAdd}\n        handleNumber={handleNumber}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <Notification message={message} deleted={deleted} />\n      <h2>Numbers</h2>\n\n      {filtered && (\n        <Persons\n          filtered={filtered}\n          handleDelete={handleDelete}\n          persons={persons}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom/client\";\nimport App from \"./App\";\nimport React from \"react\";\n\nReactDOM.createRoot(document.getElementById(\"root\")).render(<App />);\n"],"sourceRoot":""}